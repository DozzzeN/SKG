clear; close all; clc
textSize = 14;
linewid = 1;


eb = [1 2 3 4];
% BM-W MI SI MO SO
% BM-WO MI SI MO SO
% SA-W MI SI MO SO
% SA-WO MI SI MO SO
permImpBMR = [
    0 1-0.998226950 0 0;
    1-0.94270833 1-0.72002551 1-0.8958333333 1-0.83630952;
    0 1-0.999102 0 0;
    1-0.989051095 1-0.961928934 0 1-0.998668442
    ];
permImpKMR = [
    0 1-0.9837892 0 0;
    1-0.77777777 1-0.377551020 1-0.5 1-0.523809523;
    0 1-0.993243 0 0;
    1-0.974522293 1-0.966666667 0 1-0.971428571
    ];

% permImpBMR = [0 1-0.769448819 1-0.999668435 1-0.989051095;
%     1-0.995793269 1-0.493264249 0 1-0.961928934;
%     0 1-0.7890625 0 0;
%     0 1-0.8984375 0 1-0.998668442];
% permImpKMR = [0 1-0.08 1-0.993630573 1-0.974522293;
%     1-0.753846154 1-0.071428571 0 1-0.966666667;
%     0 1-0.166666667 0 0;
%     0 1 0 1-0.971428571];

figure(12)
bar(eb, permImpBMR', 'grouped')
hold on
ax = gca;
ax.YAxis.FontSize = 13;
ax.XAxis.FontSize = 13;
ax.YAxis.FontWeight = 'bold';
ax.XAxis.FontWeight = 'bold';

row1 = {'Mobile' 'Stationary' 'Mobile' 'Stationary'};
row2 = {'Indoor' 'Indoor' 'Outdoor' 'Outdoor'};
labelArray = [row1; row2]; 
tickLabels = strtrim(sprintf('%s\\newline%s \n', labelArray{:}));
ax.XTickLabel = tickLabels; 

ylim([0 0.5])
legend('BM-SKG w. Shuffling', 'BM-SKG w.o. Shuffling', 'SA-SKG w. Shuffling', 'SA-SKG w.o. Shuffling', 'FontSize', textSize, 'FontWeight', 'bold', 'Location', 'northeast')
% legend('BM-SKG w. E. P.', 'BM-SKG w.o. E. P.', 'SA-SKG w. E. P.', 'SA-SKG w.o. E. P.', 'FontSize', textSize, 'FontWeight', 'bold', 'Location', 'northeast')
ylabel('BMR', 'FontSize',15, 'FontWeight','bold')

% for i=1:length(permImpBMR)
%     text(eb(i)-0.3,permImpBMR(1,i),num2str(permImpBMR(1,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)-0.1,permImpBMR(2,i),num2str(permImpBMR(2,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)+0.1,permImpBMR(3,i),num2str(permImpBMR(3,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)+0.3,permImpBMR(4,i),num2str(permImpBMR(4,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom') 
% end
% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[0.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.06 /',...
    'Position',[0.936698785085882 0.0588680126831683 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[1.1 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.011',...
    'Position',[1.28165060745706 0.024909301039604 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.0018 /',...
    'Position',[1.60213657310432 0.00252356268316833 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.28 /',...
    'Position',[1.93669878508588 0.283270404465347 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.0009 /',...
    'Position',[2.21009635525765 0.0379553273762376 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.038',...
    'Position',[2.31223292836196 0.0627245313465347 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[2.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.10 /',...
    'Position',[2.9305823209049 0.108264232673267 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[3.1 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0',...
    'Position',[3.3 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[3.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.16 /',...
    'Position',[3.9305823209049 0.166017945544554 1.4210854715202e-14]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[4.06330121491412 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.0013',...
    'Position',[4.31834939254294 0.00133155800000001 1.4210854715202e-14]);

print('permImpBMR','-depsc')

figure(13)
bar(eb, permImpKMR', 'grouped')
hold on
ax = gca;
ax.YAxis.FontSize = 13;
ax.XAxis.FontSize = 13;
ax.YAxis.FontWeight = 'bold';
ax.XAxis.FontWeight = 'bold';

row1 = {'Mobile' 'Stationary' 'Mobile' 'Stationary'};
row2 = {'Indoor' 'Indoor' 'Outdoor' 'Outdoor'};
labelArray = [row1; row2]; 
tickLabels = strtrim(sprintf('%s\\newline%s \n', labelArray{:}));
ax.XTickLabel = tickLabels; 

ylim([0 1.05])
legend('BM-SKG w. Shuffling', 'BM-SKG w.o. Shuffling', 'SA-SKG w. Shuffling', 'SA-SKG w.o. Shuffling', 'FontSize', textSize, 'FontWeight', 'bold', 'Location', 'northeast')
ylabel('KMR', 'FontSize',15, 'FontWeight','bold')

% for i=1:length(permImpKMR)
%     text(eb(i)-0.3,permImpKMR(1,i),num2str(permImpKMR(1,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)-0.1,permImpKMR(2,i),num2str(permImpKMR(2,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)+0.1,permImpKMR(3,i),num2str(permImpKMR(3,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom')
%     text(eb(i)+0.3,permImpKMR(4,i),num2str(permImpKMR(4,i), '%.2g'), 'FontWeight','bold', 'HorizontalAlignment', 'center', 'VerticalAlignment', 'bottom') 
% end
% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[0.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.22 /',...
    'Position',[0.942815249266862 0.235643564356436 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[1.1 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.025',...
    'Position',[1.3 0.0571608753168318 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.016 /',...
    'Position',[1.5888353581902 0.0104401496303631 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.62 /',...
    'Position',[1.94281524926686 0.640254597316832 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.0068 /',...
    'Position',[2.21621281943863 0.0317159616534654 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.033',...
    'Position',[2.34281524926686 0.0935313528019801 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[2.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.50 /',...
    'Position',[2.94281524926686 0.516501649831683 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[3.1 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0',...
    'Position',[3.3 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[3.7 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.48 /',...
    'Position',[3.93669878508588 0.483564356435644 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0 /',...
    'Position',[4.1 0 0]);

% 创建 text
text('VerticalAlignment','bottom',...
    'HorizontalAlignment','center',...
    'FontWeight','bold',...
    'String','0.029',...
    'Position',[4.3 0.047581329990099 0]);

print('permImpKMR','-depsc')